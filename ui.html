
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<style>
  .hide {
    display: none;
  }
  .red-text {
    color: red;
  }

  .bottomContainerOne{
    background: none repeat scroll 0 0 transparent;
    bottom: 0;
    position: fixed;
    text-align: center;
    width: 100%;
  }

  .bottomItemOne {
    background: none repeat scroll 0 0 white;
    height: 37px;
    margin: auto;
    width: 400px;
  }

  .bottomItemOneTwo {
    background: none repeat scroll 0 0 white;
    height: 25px;
    margin: auto;
    width: 400px;
  }
</style>


<div id="main" class="text-center">
      <p style="color: #396EB0; margin: 4% 0 6%; font-size: medium; font-weight: 600;"> Generate text in Indian scripts</p>
      <div class="text-center" style="background-color: #fafafa; width: 100%; padding: 4% 3% 2%; align-items: center;">
        <div class="input-group" style="align-items: center; margin: 0 2% 3%;">
            <input class="form-control" style="border-radius: 5px; max-width: 10%; max-height: 40px; font-weight: 400; font-size: large; color: navy; margin-right: 2%;" id="inputBox" value="5">
            <select class="form-control form-select" style="border-radius: 5px; max-width: 29%; font-weight: 400; margin-right: 5%;" id="type" name="">
              <option id="words" value="words">Words</option>
              <option id="sent" value="sentences" selected>Sentences</option>
              <option id="para" value="paragraphs">Paragraphs</option>
            </select>
            <p style="color: black; margin-right: 5%; margin-top: 3%; font-size: large; font-weight: 400;">in</p>
            <select class="form-control form-select" style="border-radius: 5px; font-weight: 400; max-width: 42%;" id="language" name="">
              <option id="hi" value="Hindi" selected>Hindi (हिंदी)</option>
              <option id="sa" value="Sanskrit">Sanskrit (संस्कृतम्)</option>
              <option id="mr" value="Marathi">Marathi (मराठी)</option>
              <option id="kn" value="Kannada">Kannada (ಕನ್ನಡ)</option>
              <option id="ta" value="Tamil">Tamil (தமிழ்)</option>
              <option id="te" value="Telugu">Telugu (తెలుగు)</option>
              <option id="ba" value="Bangla">Bangla (বাংলা)</option>
              <option id="gu" value="Gujarati">Gujarati (ગુજરાતી)</option>
              <option id="ma" value="Malayalam">Malayalam (മലയാളം)</option>
              <option id="od" value="Odia">Odia (ଓଡ଼ିଆ)</option>
              <option id="pa" value="Punjabi">Punjabi (ਪੰਜਾਬੀ)</option>
            </select>
        </div>

        <div>
          <button class="btn btn-primary btn-small" style="margin: 0 0 2%;" id="getDesiIpsum">Generate</button>
          <!-- <button class="btn btn-primary btn-small" style="margin: 0 0 2%;" id="cancel">Cancel</button> -->
        </div>

      </div>

      <div style="margin: 1% 0 0%; background-color: #fff; max-height: 7%;">
        <p id="inputErrorText" style="display: none; color: red;">No error</p> 
      </div>


      <!-- Created a container at bottom to hold two elements at fixed position and at center. Added class in style for handling it -->
      <div class="bottomContainerOne">
        <!-- <div class="bottomItemOne" >
          <input type="checkbox" id="close" style="margin: 0% 0 2%; background-color: #fafafa;" name="closeConfirm" value=""><label style="margin: 0 2% 0; font-size: small;" for="closeConfirm">Close plugin after generating text block</label><br>
        </div> -->

        <div class="bottomItemTwo" style="padding: 0 10% 0;">
          <p style="font-size: 0.63rem; color: #2F86A6; opacity: 0.6;">Disclaimer: This plugin generates text with random combinations without any suggestive meaning. </p>
        </div>
      </div>
      

      

      
</div>
  


<script>

//This block partially working. Need to restart plugin. Plugin should keep on checking (recursive function)
  onmessage = (event) => {
    // if(event.data.pluginMessage.error === true){
    //   document.getElementById("main").innerHTML = event.data.pluginMessage.errorMessage;
    //   document.getElementById("main").style.color = "red";
    //   document.getElementById("main").style.textAlign = "center";
    //   document.getElementById("main").style.marginTop = "70px";
    // }

    // if(event.data.pluginMessage.notNumber === true){
    //   document.getElementById("inputErrorText").innerHTML = event.data.pluginMessage.notNumberErrorMessage;
    //   document.getElementById("main").style.color = "red";
    // }

    // if(event.data.pluginMessage.numNotPos === true){
    //   document.getElementById("inputErrorText").innerHTML = event.data.pluginMessage.numNotPosErrorMessage;
    //   document.getElementById("main").style.color = "red";
    // }


    //this error is working
    if(event.data.pluginMessage.error === "noTextLayer"){
      document.getElementById("inputErrorText").innerHTML = event.data.pluginMessage.message.nodeTypeError;
      document.getElementById("inputErrorText").style.display = "block";
      document.getElementById("inputErrorText").style.color = "red";

    }else if(event.data.pluginMessage.error === "TextLayer"){
      document.getElementById("inputErrorText").style.display = "none";
    }else if(event.data.pluginMessage.error === "inputNotNumber"){
      document.getElementById("inputErrorText").innerHTML = event.data.pluginMessage.message.notANumber;
      document.getElementById("inputErrorText").style.display = "block";
      document.getElementById("inputErrorText").style.color = "red";
    }else if(event.data.pluginMessage.error === "inputLessThanZero"){
      document.getElementById("inputErrorText").innerHTML = event.data.pluginMessage.message.lessThanZero;
      document.getElementById("inputErrorText").style.display = "block";
      document.getElementById("inputErrorText").style.color = "red";
    }


  }

  //This code block is working! Getting all three inputs in TS file
  document.getElementById('getDesiIpsum').onclick = () => {
    const inputNumber = document.getElementById('inputBox');
    const inputValue = inputNumber.value;
    const type = document.getElementById('type').selectedOptions;
    const typeInput = type[0].value;
    const language = document.getElementById('language').selectedOptions;
    const languageInput = language[0].value;
    // const checkBox = document.getElementById('close').checked;
    parent.postMessage({ pluginMessage: { type: 'get-desi-ipsum', data: {inputValue, languageInput, typeInput}}}, '*');
  }

  // document.getElementById('cancel').onclick = () => {
  //   parent.postMessage({ pluginMessage: { type: 'cancel'} },'*')
  // }

</script>
