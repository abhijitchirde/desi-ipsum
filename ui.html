
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<style>
  .hide {
    display: none;
  }
  .red-text {
    color: red;
  }

  .bottomContainerOne{
    background: none repeat scroll 0 0 transparent;
    bottom: 0;
    position: fixed;
    text-align: center;
    width: 100%;
  }

  .bottomItemOne {
    background: none repeat scroll 0 0 white;
    height: 37px;
    margin: auto;
    width: 400px;
  }

  .bottomItemTwo {
    background: none repeat scroll 0 0 white;
    height: 50px;
    margin: auto;
    width: 400px;
  }

  .text-medium {
    font-size: small;
    font-weight: 400;
  }
</style>


<div id="main" class="text-center">
      <p class="text-medium" style="color: #2179e4; margin: 4% 0 6%;"> Generate random text in Indian languages</p>
      <div class="text-center" style="background-color: #fafafa; width: 100%; padding: 3% 3% 3%; align-items: center;">
        <div class="input-group" style="align-items: center; margin-bottom: 4%; margin-left: 3%; margin-right: 2%;">
            <input class="form-control text-medium" style="border-radius: 5px; max-width: 11%; max-height: 37px; color: navy; margin-right: 2%;" id="inputBox" value="5">
            <select class="form-control form-select text-medium" style="border-radius: 5px; max-width: 29%; margin-right: 3%; " id="type" name="">
              <option id="words" class="text-medium" value="words">Words</option>
              <option id="sent" class="text-medium" value="sentences" selected>Sentences</option>
              <option id="para" class="text-medium" value="paragraphs">Paragraphs</option>
            </select>
            <p style="color: black; margin-right: 3%; margin-top: 3%; font-size: medium; font-weight: 400;">in</p>
            <select class="form-control form-select text-medium" style="border-radius: 5px; max-width: 42%; " id="language" name="">
              <option id="hi" class="text-medium" value="Hindi" selected>Hindi (हिंदी)</option>
              <option id="sa" class="text-medium" value="Sanskrit">Sanskrit (संस्कृतम्)</option>
              <option id="mr" class="text-medium" value="Marathi">Marathi (मराठी)</option>
              <option id="kn" class="text-medium" value="Kannada">Kannada (ಕನ್ನಡ)</option>
              <option id="ta" class="text-medium" value="Tamil">Tamil (தமிழ்)</option>
              <option id="te" class="text-medium" value="Telugu">Telugu (తెలుగు)</option>
              <option id="ba" class="text-medium" value="Bangla">Bangla (বাংলা)</option>
              <option id="gu" class="text-medium" value="Gujarati">Gujarati (ગુજરાતી)</option>
              <option id="ma" class="text-medium" value="Malayalam">Malayalam (മലയാളം)</option>
              <option id="od" class="text-medium" value="Odia">Odia (ଓଡ଼ିଆ)</option>
              <option id="pa" class="text-medium" value="Punjabi">Punjabi (ਪੰਜਾਬੀ)</option>
            </select>
        </div>

        <div style="align-content: center;">
          <button class="btn btn-primary btn-sm" style="margin: 0 1% 2%;" id="getDesiIpsum">Generate</button>
          <button class="btn btn-outline-secondary btn-sm" style="margin: 0 1% 2%;" id="close">Cancel</button>
        </div>

      </div>

      <!-- Error text area -->
      <div style="margin: 2% 0 1%; background-color: #fff; max-height: 7%; ">
        <p id="inputErrorText" style="display: none; color: red; font-size: small;">No error</p> 
      </div>


      <!-- Created a container at bottom to hold two elements at fixed position and at center. Added class in style for handling it -->
      <div class="bottomContainerOne">
        <!-- <div class="bottomItemOne" >
          <input type="checkbox" id="close" style="margin: 0% 0 2%; background-color: #fafafa;" name="closeConfirm" value=""><label style="margin: 0 2% 0; font-size: small;" for="closeConfirm">Close plugin after generating text block</label><br>
        </div> -->

        <div class="bottomItemTwo" style="padding: 0 3% 3%;">
          <button id="disclaimer" style="color: lightgray; border: none; background-color: white; font-size: smaller;">Disclaimer notice</button>
          <!-- <p style="font-size: 0.63rem; color: #2F86A6; opacity: 0.6;">Disclaimer notice: This plugin generates text with random combinations without any suggestive meaning. </p> -->
        </div>
      </div>
      

      

      
</div>
  


<script>

//This block working.
  onmessage = (event) => {
   
    //this error is working
    if(event.data.pluginMessage.error === "noTextLayer"){
      document.getElementById("inputErrorText").innerHTML = event.data.pluginMessage.message.nodeTypeError;
      document.getElementById("inputErrorText").style.display = "block";
      document.getElementById("inputErrorText").style.color = "red";
    }else if(event.data.pluginMessage.error === "TextLayer"){
      document.getElementById("inputErrorText").style.display = "none";
    }else if(event.data.pluginMessage.error === "inputNotNumber"){
      document.getElementById("inputErrorText").innerHTML = event.data.pluginMessage.message.notANumber;
      document.getElementById("inputErrorText").style.display = "block";
      document.getElementById("inputErrorText").style.color = "red";
    }else if(event.data.pluginMessage.error === "inputLessThanZero"){
      document.getElementById("inputErrorText").innerHTML = event.data.pluginMessage.message.lessThanZero;
      document.getElementById("inputErrorText").style.display = "block";
      document.getElementById("inputErrorText").style.color = "red";
    }


  }

  //This code block is working! Getting all three inputs in TS file
  document.getElementById('getDesiIpsum').onclick = () => {
    const inputNumber = document.getElementById('inputBox');
    const inputValue = inputNumber.value;
    const type = document.getElementById('type').selectedOptions;
    const typeInput = type[0].value;
    const language = document.getElementById('language').selectedOptions;
    const languageInput = language[0].value;
    const checkBox = document.getElementById('close').checked;
    parent.postMessage({ pluginMessage: { type: 'get-desi-ipsum', data: {inputValue, languageInput, typeInput}}}, '*');
  }

  document.getElementById('close').onclick = () => {
    parent.postMessage({ pluginMessage: {type: 'cancel'} },'*')
  }

  document.getElementById('disclaimer').onclick = () => {
    parent.postMessage({ pluginMessage: {type: 'disclaimer'} },'*')
  }

</script>
